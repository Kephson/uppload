/*! For license information please see simple_de.js.LICENSE.txt */
(()=>{var t={129:function(t){t.exports=function(){"use strict";function t(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function e(e){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?t(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function s(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}var r="undefined"!=typeof window&&void 0!==window.document,h=r?window:{},c=!(!r||!h.document.documentElement)&&"ontouchstart"in h.document.documentElement,l=!!r&&"PointerEvent"in h,d="cropper",p="all",u="crop",f="move",m="zoom",g="e",v="w",b="s",y="n",w="ne",x="nw",M="se",S="sw",D="".concat(d,"-crop"),C="".concat(d,"-disabled"),E="".concat(d,"-hidden"),k="".concat(d,"-hide"),O="".concat(d,"-invisible"),B="".concat(d,"-modal"),T="".concat(d,"-move"),L="".concat(d,"Action"),$="".concat(d,"Preview"),A="crop",R="move",H="none",N="crop",z="cropend",q="cropmove",W="cropstart",F="dblclick",j=l?"pointerdown":c?"touchstart":"mousedown",P=l?"pointermove":c?"touchmove":"mousemove",I=l?"pointerup pointercancel":c?"touchend touchcancel":"mouseup",Y="ready",X="resize",U="wheel",_="zoom",K="image/jpeg",G=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,V=/^data:/,Q=/^data:image\/jpeg;base64,/,Z=/^img|canvas$/i,J={viewMode:0,dragMode:A,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},tt=Number.isNaN||h.isNaN;function et(t){return"number"==typeof t&&!tt(t)}var it=function(t){return t>0&&t<1/0};function at(t){return void 0===t}function nt(t){return"object"===i(t)&&null!==t}var st=Object.prototype.hasOwnProperty;function ot(t){if(!nt(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&st.call(i,"isPrototypeOf")}catch(t){return!1}}function rt(t){return"function"==typeof t}var ht=Array.prototype.slice;function ct(t){return Array.from?Array.from(t):ht.call(t)}function lt(t,e){return t&&rt(e)&&(Array.isArray(t)||et(t.length)?ct(t).forEach((function(i,a){e.call(t,i,a,t)})):nt(t)&&Object.keys(t).forEach((function(i){e.call(t,t[i],i,t)}))),t}var dt=Object.assign||function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),a=1;a<e;a++)i[a-1]=arguments[a];return nt(t)&&i.length>0&&i.forEach((function(e){nt(e)&&Object.keys(e).forEach((function(i){t[i]=e[i]}))})),t},pt=/\.\d*(?:0|9){12}\d*$/;function ut(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return pt.test(t)?Math.round(t*e)/e:t}var ft=/^width|height|left|top|marginLeft|marginTop$/;function mt(t,e){var i=t.style;lt(e,(function(t,e){ft.test(e)&&et(t)&&(t="".concat(t,"px")),i[e]=t}))}function gt(t,e){if(e)if(et(t.length))lt(t,(function(t){gt(t,e)}));else if(t.classList)t.classList.add(e);else{var i=t.className.trim();i?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e}}function vt(t,e){e&&(et(t.length)?lt(t,(function(t){vt(t,e)})):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function bt(t,e,i){e&&(et(t.length)?lt(t,(function(t){bt(t,e,i)})):i?gt(t,e):vt(t,e))}var yt=/([a-z\d])([A-Z])/g;function wt(t){return t.replace(yt,"$1-$2").toLowerCase()}function xt(t,e){return nt(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(wt(e)))}function Mt(t,e,i){nt(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute("data-".concat(wt(e)),i)}var St=/\s\s*/,Dt=function(){var t=!1;if(r){var e=!1,i=function(){},a=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});h.addEventListener("test",i,a),h.removeEventListener("test",i,a)}return t}();function Ct(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=i;e.trim().split(St).forEach((function(e){if(!Dt){var s=t.listeners;s&&s[e]&&s[e][i]&&(n=s[e][i],delete s[e][i],0===Object.keys(s[e]).length&&delete s[e],0===Object.keys(s).length&&delete t.listeners)}t.removeEventListener(e,n,a)}))}function Et(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=i;e.trim().split(St).forEach((function(e){if(a.once&&!Dt){var s=t.listeners,o=void 0===s?{}:s;n=function(){delete o[e][i],t.removeEventListener(e,n,a);for(var s=arguments.length,r=new Array(s),h=0;h<s;h++)r[h]=arguments[h];i.apply(t,r)},o[e]||(o[e]={}),o[e][i]&&t.removeEventListener(e,o[e][i],a),o[e][i]=n,t.listeners=o}t.addEventListener(e,n,a)}))}function kt(t,e,i){var a;return rt(Event)&&rt(CustomEvent)?a=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(a=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,i),t.dispatchEvent(a)}function Ot(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var Bt=h.location,Tt=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Lt(t){var e=t.match(Tt);return null!==e&&(e[1]!==Bt.protocol||e[2]!==Bt.hostname||e[3]!==Bt.port)}function $t(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function At(t){var e=t.rotate,i=t.scaleX,a=t.scaleY,n=t.translateX,s=t.translateY,o=[];et(n)&&0!==n&&o.push("translateX(".concat(n,"px)")),et(s)&&0!==s&&o.push("translateY(".concat(s,"px)")),et(e)&&0!==e&&o.push("rotate(".concat(e,"deg)")),et(i)&&1!==i&&o.push("scaleX(".concat(i,")")),et(a)&&1!==a&&o.push("scaleY(".concat(a,")"));var r=o.length?o.join(" "):"none";return{WebkitTransform:r,msTransform:r,transform:r}}function Rt(t,i){var a=t.pageX,n=t.pageY,s={endX:a,endY:n};return i?s:e({startX:a,startY:n},s)}function Ht(t){var e=t.aspectRatio,i=t.height,a=t.width,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",s=it(a),o=it(i);if(s&&o){var r=i*e;"contain"===n&&r>a||"cover"===n&&r<a?i=a/e:a=i*e}else s?i=a/e:o&&(a=i*e);return{width:a,height:i}}var Nt=String.fromCharCode;var zt=/^data:.*,/;function qt(t){var e,i=new DataView(t);try{var a,n,s;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var o=i.byteLength,r=2;r+1<o;){if(255===i.getUint8(r)&&225===i.getUint8(r+1)){n=r;break}r+=1}if(n){var h=n+10;if("Exif"===function(t,e,i){var a="";i+=e;for(var n=e;n<i;n+=1)a+=Nt(t.getUint8(n));return a}(i,n+4,4)){var c=i.getUint16(h);if(((a=18761===c)||19789===c)&&42===i.getUint16(h+2,a)){var l=i.getUint32(h+4,a);l>=8&&(s=h+l)}}}if(s){var d,p,u=i.getUint16(s,a);for(p=0;p<u;p+=1)if(d=s+12*p+2,274===i.getUint16(d,a)){d+=8,e=i.getUint16(d,a),i.setUint16(d,1,a);break}}}catch(t){e=1}return e}var Wt={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,i=this.container,a=this.cropper,n=Number(e.minContainerWidth),s=Number(e.minContainerHeight);gt(a,E),vt(t,E);var o={width:Math.max(i.offsetWidth,n>=0?n:200),height:Math.max(i.offsetHeight,s>=0?s:100)};this.containerData=o,mt(a,{width:o.width,height:o.height}),gt(t,E),vt(a,E)},initCanvas:function(){var t=this.containerData,e=this.imageData,i=this.options.viewMode,a=Math.abs(e.rotate)%180==90,n=a?e.naturalHeight:e.naturalWidth,s=a?e.naturalWidth:e.naturalHeight,o=n/s,r=t.width,h=t.height;t.height*o>t.width?3===i?r=t.height*o:h=t.width/o:3===i?h=t.width/o:r=t.height*o;var c={aspectRatio:o,naturalWidth:n,naturalHeight:s,width:r,height:h};this.canvasData=c,this.limited=1===i||2===i,this.limitCanvas(!0,!0),c.width=Math.min(Math.max(c.width,c.minWidth),c.maxWidth),c.height=Math.min(Math.max(c.height,c.minHeight),c.maxHeight),c.left=(t.width-c.width)/2,c.top=(t.height-c.height)/2,c.oldLeft=c.left,c.oldTop=c.top,this.initialCanvasData=dt({},c)},limitCanvas:function(t,e){var i=this.options,a=this.containerData,n=this.canvasData,s=this.cropBoxData,o=i.viewMode,r=n.aspectRatio,h=this.cropped&&s;if(t){var c=Number(i.minCanvasWidth)||0,l=Number(i.minCanvasHeight)||0;o>1?(c=Math.max(c,a.width),l=Math.max(l,a.height),3===o&&(l*r>c?c=l*r:l=c/r)):o>0&&(c?c=Math.max(c,h?s.width:0):l?l=Math.max(l,h?s.height:0):h&&(c=s.width,(l=s.height)*r>c?c=l*r:l=c/r));var d=Ht({aspectRatio:r,width:c,height:l});c=d.width,l=d.height,n.minWidth=c,n.minHeight=l,n.maxWidth=1/0,n.maxHeight=1/0}if(e)if(o>(h?0:1)){var p=a.width-n.width,u=a.height-n.height;n.minLeft=Math.min(0,p),n.minTop=Math.min(0,u),n.maxLeft=Math.max(0,p),n.maxTop=Math.max(0,u),h&&this.limited&&(n.minLeft=Math.min(s.left,s.left+(s.width-n.width)),n.minTop=Math.min(s.top,s.top+(s.height-n.height)),n.maxLeft=s.left,n.maxTop=s.top,2===o&&(n.width>=a.width&&(n.minLeft=Math.min(0,p),n.maxLeft=Math.max(0,p)),n.height>=a.height&&(n.minTop=Math.min(0,u),n.maxTop=Math.max(0,u))))}else n.minLeft=-n.width,n.minTop=-n.height,n.maxLeft=a.width,n.maxTop=a.height},renderCanvas:function(t,e){var i=this.canvasData,a=this.imageData;if(e){var n=function(t){var e=t.width,i=t.height,a=t.degree;if(90==(a=Math.abs(a)%180))return{width:i,height:e};var n=a%90*Math.PI/180,s=Math.sin(n),o=Math.cos(n),r=e*o+i*s,h=e*s+i*o;return a>90?{width:h,height:r}:{width:r,height:h}}({width:a.naturalWidth*Math.abs(a.scaleX||1),height:a.naturalHeight*Math.abs(a.scaleY||1),degree:a.rotate||0}),s=n.width,o=n.height,r=i.width*(s/i.naturalWidth),h=i.height*(o/i.naturalHeight);i.left-=(r-i.width)/2,i.top-=(h-i.height)/2,i.width=r,i.height=h,i.aspectRatio=s/o,i.naturalWidth=s,i.naturalHeight=o,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,mt(this.canvas,dt({width:i.width,height:i.height},At({translateX:i.left,translateY:i.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,i=this.imageData,a=i.naturalWidth*(e.width/e.naturalWidth),n=i.naturalHeight*(e.height/e.naturalHeight);dt(i,{width:a,height:n,left:(e.width-a)/2,top:(e.height-n)/2}),mt(this.image,dt({width:i.width,height:i.height},At(dt({translateX:i.left,translateY:i.top},i)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,i=t.aspectRatio||t.initialAspectRatio,a=Number(t.autoCropArea)||.8,n={width:e.width,height:e.height};i&&(e.height*i>e.width?n.height=n.width/i:n.width=n.height*i),this.cropBoxData=n,this.limitCropBox(!0,!0),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),n.width=Math.max(n.minWidth,n.width*a),n.height=Math.max(n.minHeight,n.height*a),n.left=e.left+(e.width-n.width)/2,n.top=e.top+(e.height-n.height)/2,n.oldLeft=n.left,n.oldTop=n.top,this.initialCropBoxData=dt({},n)},limitCropBox:function(t,e){var i=this.options,a=this.containerData,n=this.canvasData,s=this.cropBoxData,o=this.limited,r=i.aspectRatio;if(t){var h=Number(i.minCropBoxWidth)||0,c=Number(i.minCropBoxHeight)||0,l=o?Math.min(a.width,n.width,n.width+n.left,a.width-n.left):a.width,d=o?Math.min(a.height,n.height,n.height+n.top,a.height-n.top):a.height;h=Math.min(h,a.width),c=Math.min(c,a.height),r&&(h&&c?c*r>h?c=h/r:h=c*r:h?c=h/r:c&&(h=c*r),d*r>l?d=l/r:l=d*r),s.minWidth=Math.min(h,l),s.minHeight=Math.min(c,d),s.maxWidth=l,s.maxHeight=d}e&&(o?(s.minLeft=Math.max(0,n.left),s.minTop=Math.max(0,n.top),s.maxLeft=Math.min(a.width,n.left+n.width)-s.width,s.maxTop=Math.min(a.height,n.top+n.height)-s.height):(s.minLeft=0,s.minTop=0,s.maxLeft=a.width-s.width,s.maxTop=a.height-s.height))},renderCropBox:function(){var t=this.options,e=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&Mt(this.face,L,i.width>=e.width&&i.height>=e.height?f:p),mt(this.cropBox,dt({width:i.width,height:i.height},At({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),kt(this.element,N,this.getData())}},Ft={initPreview:function(){var t=this.element,e=this.crossOrigin,i=this.options.preview,a=e?this.crossOriginUrl:this.url,n=t.alt||"The image to preview",s=document.createElement("img");if(e&&(s.crossOrigin=e),s.src=a,s.alt=n,this.viewBox.appendChild(s),this.viewBoxImage=s,i){var o=i;"string"==typeof i?o=t.ownerDocument.querySelectorAll(i):i.querySelector&&(o=[i]),this.previews=o,lt(o,(function(t){var i=document.createElement("img");Mt(t,$,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(i.crossOrigin=e),i.src=a,i.alt=n,i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(i)}))}},resetPreview:function(){lt(this.previews,(function(t){var e=xt(t,$);mt(t,{width:e.width,height:e.height}),t.innerHTML=e.html,function(t,e){if(nt(t[e]))try{delete t[e]}catch(i){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(i){t.dataset[e]=void 0}else t.removeAttribute("data-".concat(wt(e)))}(t,$)}))},preview:function(){var t=this.imageData,e=this.canvasData,i=this.cropBoxData,a=i.width,n=i.height,s=t.width,o=t.height,r=i.left-e.left-t.left,h=i.top-e.top-t.top;this.cropped&&!this.disabled&&(mt(this.viewBoxImage,dt({width:s,height:o},At(dt({translateX:-r,translateY:-h},t)))),lt(this.previews,(function(e){var i=xt(e,$),c=i.width,l=i.height,d=c,p=l,u=1;a&&(p=n*(u=c/a)),n&&p>l&&(d=a*(u=l/n),p=l),mt(e,{width:d,height:p}),mt(e.getElementsByTagName("img")[0],dt({width:s*u,height:o*u},At(dt({translateX:-r*u,translateY:-h*u},t))))})))}},jt={bind:function(){var t=this.element,e=this.options,i=this.cropper;rt(e.cropstart)&&Et(t,W,e.cropstart),rt(e.cropmove)&&Et(t,q,e.cropmove),rt(e.cropend)&&Et(t,z,e.cropend),rt(e.crop)&&Et(t,N,e.crop),rt(e.zoom)&&Et(t,_,e.zoom),Et(i,j,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&Et(i,U,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Et(i,F,this.onDblclick=this.dblclick.bind(this)),Et(t.ownerDocument,P,this.onCropMove=this.cropMove.bind(this)),Et(t.ownerDocument,I,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&Et(window,X,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,i=this.cropper;rt(e.cropstart)&&Ct(t,W,e.cropstart),rt(e.cropmove)&&Ct(t,q,e.cropmove),rt(e.cropend)&&Ct(t,z,e.cropend),rt(e.crop)&&Ct(t,N,e.crop),rt(e.zoom)&&Ct(t,_,e.zoom),Ct(i,j,this.onCropStart),e.zoomable&&e.zoomOnWheel&&Ct(i,U,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Ct(i,F,this.onDblclick),Ct(t.ownerDocument,P,this.onCropMove),Ct(t.ownerDocument,I,this.onCropEnd),e.responsive&&Ct(window,X,this.onResize)}},Pt={resize:function(){if(!this.disabled){var t,e,i=this.options,a=this.container,n=this.containerData,s=a.offsetWidth/n.width,o=a.offsetHeight/n.height,r=Math.abs(s-1)>Math.abs(o-1)?s:o;1!==r&&(i.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),i.restore&&(this.setCanvasData(lt(t,(function(e,i){t[i]=e*r}))),this.setCropBoxData(lt(e,(function(t,i){e[i]=t*r})))))}},dblclick:function(){var t,e;this.disabled||this.options.dragMode===H||this.setDragMode((t=this.dragBox,e=D,(t.classList?t.classList.contains(e):t.className.indexOf(e)>-1)?R:A))},wheel:function(t){var e=this,i=Number(this.options.wheelZoomRatio)||.1,a=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){e.wheeling=!1}),50),t.deltaY?a=t.deltaY>0?1:-1:t.wheelDelta?a=-t.wheelDelta/120:t.detail&&(a=t.detail>0?1:-1),this.zoom(-a*i,t)))},cropStart:function(t){var e=t.buttons,i=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(et(e)&&1!==e||et(i)&&0!==i||t.ctrlKey))){var a,n=this.options,s=this.pointers;t.changedTouches?lt(t.changedTouches,(function(t){s[t.identifier]=Rt(t)})):s[t.pointerId||0]=Rt(t),a=Object.keys(s).length>1&&n.zoomable&&n.zoomOnTouch?m:xt(t.target,L),G.test(a)&&!1!==kt(this.element,W,{originalEvent:t,action:a})&&(t.preventDefault(),this.action=a,this.cropping=!1,a===u&&(this.cropping=!0,gt(this.dragBox,B)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var i=this.pointers;t.preventDefault(),!1!==kt(this.element,q,{originalEvent:t,action:e})&&(t.changedTouches?lt(t.changedTouches,(function(t){dt(i[t.identifier]||{},Rt(t,!0))})):dt(i[t.pointerId||0]||{},Rt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,i=this.pointers;t.changedTouches?lt(t.changedTouches,(function(t){delete i[t.identifier]})):delete i[t.pointerId||0],e&&(t.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,bt(this.dragBox,B,this.cropped&&this.options.modal)),kt(this.element,z,{originalEvent:t,action:e}))}}},It={change:function(t){var i,a=this.options,n=this.canvasData,s=this.containerData,o=this.cropBoxData,r=this.pointers,h=this.action,c=a.aspectRatio,l=o.left,d=o.top,D=o.width,C=o.height,k=l+D,O=d+C,B=0,T=0,L=s.width,$=s.height,A=!0;!c&&t.shiftKey&&(c=D&&C?D/C:1),this.limited&&(B=o.minLeft,T=o.minTop,L=B+Math.min(s.width,n.width,n.left+n.width),$=T+Math.min(s.height,n.height,n.top+n.height));var R=r[Object.keys(r)[0]],H={x:R.endX-R.startX,y:R.endY-R.startY},N=function(t){switch(t){case g:k+H.x>L&&(H.x=L-k);break;case v:l+H.x<B&&(H.x=B-l);break;case y:d+H.y<T&&(H.y=T-d);break;case b:O+H.y>$&&(H.y=$-O)}};switch(h){case p:l+=H.x,d+=H.y;break;case g:if(H.x>=0&&(k>=L||c&&(d<=T||O>=$))){A=!1;break}N(g),(D+=H.x)<0&&(h=v,l-=D=-D),c&&(C=D/c,d+=(o.height-C)/2);break;case y:if(H.y<=0&&(d<=T||c&&(l<=B||k>=L))){A=!1;break}N(y),C-=H.y,d+=H.y,C<0&&(h=b,d-=C=-C),c&&(D=C*c,l+=(o.width-D)/2);break;case v:if(H.x<=0&&(l<=B||c&&(d<=T||O>=$))){A=!1;break}N(v),D-=H.x,l+=H.x,D<0&&(h=g,l-=D=-D),c&&(C=D/c,d+=(o.height-C)/2);break;case b:if(H.y>=0&&(O>=$||c&&(l<=B||k>=L))){A=!1;break}N(b),(C+=H.y)<0&&(h=y,d-=C=-C),c&&(D=C*c,l+=(o.width-D)/2);break;case w:if(c){if(H.y<=0&&(d<=T||k>=L)){A=!1;break}N(y),C-=H.y,d+=H.y,D=C*c}else N(y),N(g),H.x>=0?k<L?D+=H.x:H.y<=0&&d<=T&&(A=!1):D+=H.x,H.y<=0?d>T&&(C-=H.y,d+=H.y):(C-=H.y,d+=H.y);D<0&&C<0?(h=S,d-=C=-C,l-=D=-D):D<0?(h=x,l-=D=-D):C<0&&(h=M,d-=C=-C);break;case x:if(c){if(H.y<=0&&(d<=T||l<=B)){A=!1;break}N(y),C-=H.y,d+=H.y,D=C*c,l+=o.width-D}else N(y),N(v),H.x<=0?l>B?(D-=H.x,l+=H.x):H.y<=0&&d<=T&&(A=!1):(D-=H.x,l+=H.x),H.y<=0?d>T&&(C-=H.y,d+=H.y):(C-=H.y,d+=H.y);D<0&&C<0?(h=M,d-=C=-C,l-=D=-D):D<0?(h=w,l-=D=-D):C<0&&(h=S,d-=C=-C);break;case S:if(c){if(H.x<=0&&(l<=B||O>=$)){A=!1;break}N(v),D-=H.x,l+=H.x,C=D/c}else N(b),N(v),H.x<=0?l>B?(D-=H.x,l+=H.x):H.y>=0&&O>=$&&(A=!1):(D-=H.x,l+=H.x),H.y>=0?O<$&&(C+=H.y):C+=H.y;D<0&&C<0?(h=w,d-=C=-C,l-=D=-D):D<0?(h=M,l-=D=-D):C<0&&(h=x,d-=C=-C);break;case M:if(c){if(H.x>=0&&(k>=L||O>=$)){A=!1;break}N(g),C=(D+=H.x)/c}else N(b),N(g),H.x>=0?k<L?D+=H.x:H.y>=0&&O>=$&&(A=!1):D+=H.x,H.y>=0?O<$&&(C+=H.y):C+=H.y;D<0&&C<0?(h=x,d-=C=-C,l-=D=-D):D<0?(h=S,l-=D=-D):C<0&&(h=w,d-=C=-C);break;case f:this.move(H.x,H.y),A=!1;break;case m:this.zoom(function(t){var i=e({},t),a=0;return lt(t,(function(t,e){delete i[e],lt(i,(function(e){var i=Math.abs(t.startX-e.startX),n=Math.abs(t.startY-e.startY),s=Math.abs(t.endX-e.endX),o=Math.abs(t.endY-e.endY),r=Math.sqrt(i*i+n*n),h=(Math.sqrt(s*s+o*o)-r)/r;Math.abs(h)>Math.abs(a)&&(a=h)}))})),a}(r),t),A=!1;break;case u:if(!H.x||!H.y){A=!1;break}i=Ot(this.cropper),l=R.startX-i.left,d=R.startY-i.top,D=o.minWidth,C=o.minHeight,H.x>0?h=H.y>0?M:w:H.x<0&&(l-=D,h=H.y>0?S:x),H.y<0&&(d-=C),this.cropped||(vt(this.cropBox,E),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}A&&(o.width=D,o.height=C,o.left=l,o.top=d,this.action=h,this.renderCropBox()),lt(r,(function(t){t.startX=t.endX,t.startY=t.endY}))}},Yt={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&gt(this.dragBox,B),vt(this.cropBox,E),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=dt({},this.initialImageData),this.canvasData=dt({},this.initialCanvasData),this.cropBoxData=dt({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(dt(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),vt(this.dragBox,B),gt(this.cropBox,E)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,lt(this.previews,(function(e){e.getElementsByTagName("img")[0].src=t})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,vt(this.cropper,C)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,gt(this.cropper,C)),this},destroy:function(){var t=this.element;return t[d]?(t[d]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,a=i.left,n=i.top;return this.moveTo(at(t)?t:a+Number(t),at(e)?e:n+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,a=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(et(t)&&(i.left=t,a=!0),et(e)&&(i.top=e,a=!0),a&&this.renderCanvas(!0)),this},zoom:function(t,e){var i=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(i.width*t/i.naturalWidth,null,e)},zoomTo:function(t,e,i){var a=this.options,n=this.canvasData,s=n.width,o=n.height,r=n.naturalWidth,h=n.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&a.zoomable){var c=r*t,l=h*t;if(!1===kt(this.element,_,{ratio:t,oldRatio:s/r,originalEvent:i}))return this;if(i){var d=this.pointers,p=Ot(this.cropper),u=d&&Object.keys(d).length?function(t){var e=0,i=0,a=0;return lt(t,(function(t){var n=t.startX,s=t.startY;e+=n,i+=s,a+=1})),{pageX:e/=a,pageY:i/=a}}(d):{pageX:i.pageX,pageY:i.pageY};n.left-=(c-s)*((u.pageX-p.left-n.left)/s),n.top-=(l-o)*((u.pageY-p.top-n.top)/o)}else ot(e)&&et(e.x)&&et(e.y)?(n.left-=(c-s)*((e.x-n.left)/s),n.top-=(l-o)*((e.y-n.top)/o)):(n.left-=(c-s)/2,n.top-=(l-o)/2);n.width=c,n.height=l,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return et(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,et(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(et(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.imageData,a=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(et(t)&&(i.scaleX=t,a=!0),et(e)&&(i.scaleY=e,a=!0),a&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.options,a=this.imageData,n=this.canvasData,s=this.cropBoxData;if(this.ready&&this.cropped){t={x:s.left-n.left,y:s.top-n.top,width:s.width,height:s.height};var o=a.width/a.naturalWidth;if(lt(t,(function(e,i){t[i]=e/o})),e){var r=Math.round(t.y+t.height),h=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=h-t.x,t.height=r-t.y}}else t={x:0,y:0,width:0,height:0};return i.rotatable&&(t.rotate=a.rotate||0),i.scalable&&(t.scaleX=a.scaleX||1,t.scaleY=a.scaleY||1),t},setData:function(t){var e=this.options,i=this.imageData,a=this.canvasData,n={};if(this.ready&&!this.disabled&&ot(t)){var s=!1;e.rotatable&&et(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,s=!0),e.scalable&&(et(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,s=!0),et(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,s=!0)),s&&this.renderCanvas(!0,!0);var o=i.width/i.naturalWidth;et(t.x)&&(n.left=t.x*o+a.left),et(t.y)&&(n.top=t.y*o+a.top),et(t.width)&&(n.width=t.width*o),et(t.height)&&(n.height=t.height*o),this.setCropBoxData(n)}return this},getContainerData:function(){return this.ready?dt({},this.containerData):{}},getImageData:function(){return this.sized?dt({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&lt(["left","top","width","height","naturalWidth","naturalHeight"],(function(i){e[i]=t[i]})),e},setCanvasData:function(t){var e=this.canvasData,i=e.aspectRatio;return this.ready&&!this.disabled&&ot(t)&&(et(t.left)&&(e.left=t.left),et(t.top)&&(e.top=t.top),et(t.width)?(e.width=t.width,e.height=t.width/i):et(t.height)&&(e.height=t.height,e.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,i,a=this.cropBoxData,n=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&ot(t)&&(et(t.left)&&(a.left=t.left),et(t.top)&&(a.top=t.top),et(t.width)&&t.width!==a.width&&(e=!0,a.width=t.width),et(t.height)&&t.height!==a.height&&(i=!0,a.height=t.height),n&&(e?a.height=a.width/n:i&&(a.width=a.height*n)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,i=function(t,e,i,a){var n=e.aspectRatio,o=e.naturalWidth,r=e.naturalHeight,h=e.rotate,c=void 0===h?0:h,l=e.scaleX,d=void 0===l?1:l,p=e.scaleY,u=void 0===p?1:p,f=i.aspectRatio,m=i.naturalWidth,g=i.naturalHeight,v=a.fillColor,b=void 0===v?"transparent":v,y=a.imageSmoothingEnabled,w=void 0===y||y,x=a.imageSmoothingQuality,M=void 0===x?"low":x,S=a.maxWidth,D=void 0===S?1/0:S,C=a.maxHeight,E=void 0===C?1/0:C,k=a.minWidth,O=void 0===k?0:k,B=a.minHeight,T=void 0===B?0:B,L=document.createElement("canvas"),$=L.getContext("2d"),A=Ht({aspectRatio:f,width:D,height:E}),R=Ht({aspectRatio:f,width:O,height:T},"cover"),H=Math.min(A.width,Math.max(R.width,m)),N=Math.min(A.height,Math.max(R.height,g)),z=Ht({aspectRatio:n,width:D,height:E}),q=Ht({aspectRatio:n,width:O,height:T},"cover"),W=Math.min(z.width,Math.max(q.width,o)),F=Math.min(z.height,Math.max(q.height,r)),j=[-W/2,-F/2,W,F];return L.width=ut(H),L.height=ut(N),$.fillStyle=b,$.fillRect(0,0,H,N),$.save(),$.translate(H/2,N/2),$.rotate(c*Math.PI/180),$.scale(d,u),$.imageSmoothingEnabled=w,$.imageSmoothingQuality=M,$.drawImage.apply($,[t].concat(s(j.map((function(t){return Math.floor(ut(t))}))))),$.restore(),L}(this.image,this.imageData,e,t);if(!this.cropped)return i;var a=this.getData(),n=a.x,o=a.y,r=a.width,h=a.height,c=i.width/Math.floor(e.naturalWidth);1!==c&&(n*=c,o*=c,r*=c,h*=c);var l=r/h,d=Ht({aspectRatio:l,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),p=Ht({aspectRatio:l,width:t.minWidth||0,height:t.minHeight||0},"cover"),u=Ht({aspectRatio:l,width:t.width||(1!==c?i.width:r),height:t.height||(1!==c?i.height:h)}),f=u.width,m=u.height;f=Math.min(d.width,Math.max(p.width,f)),m=Math.min(d.height,Math.max(p.height,m));var g=document.createElement("canvas"),v=g.getContext("2d");g.width=ut(f),g.height=ut(m),v.fillStyle=t.fillColor||"transparent",v.fillRect(0,0,f,m);var b=t.imageSmoothingEnabled,y=void 0===b||b,w=t.imageSmoothingQuality;v.imageSmoothingEnabled=y,w&&(v.imageSmoothingQuality=w);var x,M,S,D,C,E,k=i.width,O=i.height,B=n,T=o;B<=-r||B>k?(B=0,x=0,S=0,C=0):B<=0?(S=-B,B=0,C=x=Math.min(k,r+B)):B<=k&&(S=0,C=x=Math.min(r,k-B)),x<=0||T<=-h||T>O?(T=0,M=0,D=0,E=0):T<=0?(D=-T,T=0,E=M=Math.min(O,h+T)):T<=O&&(D=0,E=M=Math.min(h,O-T));var L=[B,T,x,M];if(C>0&&E>0){var $=f/r;L.push(S*$,D*$,C*$,E*$)}return v.drawImage.apply(v,[i].concat(s(L.map((function(t){return Math.floor(ut(t))}))))),g},setAspectRatio:function(t){var e=this.options;return this.disabled||at(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,i=this.dragBox,a=this.face;if(this.ready&&!this.disabled){var n=t===A,s=e.movable&&t===R;t=n||s?t:H,e.dragMode=t,Mt(i,L,t),bt(i,D,n),bt(i,T,s),e.cropBoxMovable||(Mt(a,L,t),bt(a,D,n),bt(a,T,s))}return this}},Xt=h.Cropper,Ut=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e||!Z.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=dt({},J,ot(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return e=t,n=[{key:"noConflict",value:function(){return window.Cropper=Xt,t}},{key:"setDefaults",value:function(t){dt(J,ot(t)&&t)}}],(i=[{key:"init",value:function(){var t,e=this.element,i=e.tagName.toLowerCase();if(!e[d]){if(e[d]=this,"img"===i){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===i&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e,i,a,n,s=this;if(t){this.url=t,this.imageData={};var o=this.element,r=this.options;if(r.rotatable||r.scalable||(r.checkOrientation=!1),r.checkOrientation&&window.ArrayBuffer)if(V.test(t))Q.test(t)?this.read((e=t.replace(zt,""),i=atob(e),a=new ArrayBuffer(i.length),lt(n=new Uint8Array(a),(function(t,e){n[e]=i.charCodeAt(e)})),a)):this.clone();else{var h=new XMLHttpRequest,c=this.clone.bind(this);this.reloading=!0,this.xhr=h,h.onabort=c,h.onerror=c,h.ontimeout=c,h.onprogress=function(){h.getResponseHeader("content-type")!==K&&h.abort()},h.onload=function(){s.read(h.response)},h.onloadend=function(){s.reloading=!1,s.xhr=null},r.checkCrossOrigin&&Lt(t)&&o.crossOrigin&&(t=$t(t)),h.open("GET",t,!0),h.responseType="arraybuffer",h.withCredentials="use-credentials"===o.crossOrigin,h.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,i=this.imageData,a=qt(t),n=0,s=1,o=1;if(a>1){this.url=function(t,e){for(var i=[],a=new Uint8Array(t);a.length>0;)i.push(Nt.apply(null,ct(a.subarray(0,8192)))),a=a.subarray(8192);return"data:".concat(e,";base64,").concat(btoa(i.join("")))}(t,K);var r=function(t){var e=0,i=1,a=1;switch(t){case 2:i=-1;break;case 3:e=-180;break;case 4:a=-1;break;case 5:e=90,a=-1;break;case 6:e=90;break;case 7:e=90,i=-1;break;case 8:e=-90}return{rotate:e,scaleX:i,scaleY:a}}(a);n=r.rotate,s=r.scaleX,o=r.scaleY}e.rotatable&&(i.rotate=n),e.scalable&&(i.scaleX=s,i.scaleY=o),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,i=t.crossOrigin,a=e;this.options.checkCrossOrigin&&Lt(e)&&(i||(i="anonymous"),a=$t(e)),this.crossOrigin=i,this.crossOriginUrl=a;var n=document.createElement("img");i&&(n.crossOrigin=i),n.src=a||e,n.alt=t.alt||"The image to crop",this.image=n,n.onload=this.start.bind(this),n.onerror=this.stop.bind(this),gt(n,k),t.parentNode.insertBefore(n,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var i=h.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(h.navigator.userAgent),a=function(e,i){dt(t.imageData,{naturalWidth:e,naturalHeight:i,aspectRatio:e/i}),t.initialImageData=dt({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||i){var n=document.createElement("img"),s=document.body||document.documentElement;this.sizingImage=n,n.onload=function(){a(n.width,n.height),i||s.removeChild(n)},n.src=e.src,i||(n.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",s.appendChild(n))}else a(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,i=this.image,a=t.parentNode,n=document.createElement("div");n.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var s=n.querySelector(".".concat(d,"-container")),o=s.querySelector(".".concat(d,"-canvas")),r=s.querySelector(".".concat(d,"-drag-box")),h=s.querySelector(".".concat(d,"-crop-box")),c=h.querySelector(".".concat(d,"-face"));this.container=a,this.cropper=s,this.canvas=o,this.dragBox=r,this.cropBox=h,this.viewBox=s.querySelector(".".concat(d,"-view-box")),this.face=c,o.appendChild(i),gt(t,E),a.insertBefore(s,t.nextSibling),vt(i,k),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,gt(h,E),e.guides||gt(h.getElementsByClassName("".concat(d,"-dashed")),E),e.center||gt(h.getElementsByClassName("".concat(d,"-center")),E),e.background&&gt(s,"".concat(d,"-bg")),e.highlight||gt(c,O),e.cropBoxMovable&&(gt(c,T),Mt(c,L,p)),e.cropBoxResizable||(gt(h.getElementsByClassName("".concat(d,"-line")),E),gt(h.getElementsByClassName("".concat(d,"-point")),E)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),rt(e.ready)&&Et(t,Y,e.ready,{once:!0}),kt(t,Y)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var t=this.cropper.parentNode;t&&t.removeChild(this.cropper),vt(this.element,E)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&a(e.prototype,i),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t;var e,i,n}();return dt(Ut.prototype,Wt,Ft,jt,Pt,It,Yt),Ut}()},172:(t,e,i)=>{var a,n,s=i(760),o=i(529),r=(n=[],{activateTrap:function(t){if(n.length>0){var e=n[n.length-1];e!==t&&e.pause()}var i=n.indexOf(t);-1===i||n.splice(i,1),n.push(t)},deactivateTrap:function(t){var e=n.indexOf(t);-1!==e&&n.splice(e,1),n.length>0&&n[n.length-1].unpause()}});function h(t){return setTimeout(t,0)}t.exports=function(t,e){var i=document,n="string"==typeof t?i.querySelector(t):t,c=o({returnFocusOnDeactivate:!0,escapeDeactivates:!0},e),l={firstTabbableNode:null,lastTabbableNode:null,nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1},d={activate:function(t){if(!l.active){x(),l.active=!0,l.paused=!1,l.nodeFocusedBeforeActivation=i.activeElement;var e=t&&t.onActivate?t.onActivate:c.onActivate;return e&&e(),u(),d}},deactivate:p,pause:function(){!l.paused&&l.active&&(l.paused=!0,f())},unpause:function(){l.paused&&l.active&&(l.paused=!1,x(),u())}};return d;function p(t){if(l.active){clearTimeout(a),f(),l.active=!1,l.paused=!1,r.deactivateTrap(d);var e=t&&void 0!==t.onDeactivate?t.onDeactivate:c.onDeactivate;return e&&e(),(t&&void 0!==t.returnFocus?t.returnFocus:c.returnFocusOnDeactivate)&&h((function(){var t;M((t=l.nodeFocusedBeforeActivation,m("setReturnFocus")||t))})),d}}function u(){if(l.active)return r.activateTrap(d),a=h((function(){M(g())})),i.addEventListener("focusin",b,!0),i.addEventListener("mousedown",v,{capture:!0,passive:!1}),i.addEventListener("touchstart",v,{capture:!0,passive:!1}),i.addEventListener("click",w,{capture:!0,passive:!1}),i.addEventListener("keydown",y,{capture:!0,passive:!1}),d}function f(){if(l.active)return i.removeEventListener("focusin",b,!0),i.removeEventListener("mousedown",v,!0),i.removeEventListener("touchstart",v,!0),i.removeEventListener("click",w,!0),i.removeEventListener("keydown",y,!0),d}function m(t){var e=c[t],a=e;if(!e)return null;if("string"==typeof e&&!(a=i.querySelector(e)))throw new Error("`"+t+"` refers to no known node");if("function"==typeof e&&!(a=e()))throw new Error("`"+t+"` did not return a node");return a}function g(){var t;if(!(t=null!==m("initialFocus")?m("initialFocus"):n.contains(i.activeElement)?i.activeElement:l.firstTabbableNode||m("fallbackFocus")))throw new Error("Your focus-trap needs to have at least one focusable element");return t}function v(t){n.contains(t.target)||(c.clickOutsideDeactivates?p({returnFocus:!s.isFocusable(t.target)}):c.allowOutsideClick&&c.allowOutsideClick(t)||t.preventDefault())}function b(t){n.contains(t.target)||t.target instanceof Document||(t.stopImmediatePropagation(),M(l.mostRecentlyFocusedNode||g()))}function y(t){if(!1!==c.escapeDeactivates&&function(t){return"Escape"===t.key||"Esc"===t.key||27===t.keyCode}(t))return t.preventDefault(),void p();(function(t){return"Tab"===t.key||9===t.keyCode})(t)&&function(t){if(x(),t.shiftKey&&t.target===l.firstTabbableNode)return t.preventDefault(),void M(l.lastTabbableNode);t.shiftKey||t.target!==l.lastTabbableNode||(t.preventDefault(),M(l.firstTabbableNode))}(t)}function w(t){c.clickOutsideDeactivates||n.contains(t.target)||c.allowOutsideClick&&c.allowOutsideClick(t)||(t.preventDefault(),t.stopImmediatePropagation())}function x(){var t=s(n);l.firstTabbableNode=t[0]||g(),l.lastTabbableNode=t[t.length-1]||g()}function M(t){t!==i.activeElement&&(t&&t.focus?(t.focus(),l.mostRecentlyFocusedNode=t,function(t){return t.tagName&&"input"===t.tagName.toLowerCase()&&"function"==typeof t.select}(t)&&t.select()):M(g()))}}},760:t=>{var e=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'],i=e.join(","),a="undefined"==typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;function n(t,e){e=e||{};var n,o,r,l=[],d=[],p=t.querySelectorAll(i);for(e.includeContainer&&a.call(t,i)&&(p=Array.prototype.slice.apply(p)).unshift(t),n=0;n<p.length;n++)s(o=p[n])&&(0===(r=h(o))?l.push(o):d.push({documentOrder:n,tabIndex:r,node:o}));return d.sort(c).map((function(t){return t.node})).concat(l)}function s(t){return!(!o(t)||function(t){return function(t){return l(t)&&"radio"===t.type}(t)&&!function(t){if(!t.name)return!0;var e=function(t){for(var e=0;e<t.length;e++)if(t[e].checked)return t[e]}(t.ownerDocument.querySelectorAll('input[type="radio"][name="'+t.name+'"]'));return!e||e===t}(t)}(t)||h(t)<0)}function o(t){return!(t.disabled||function(t){return l(t)&&"hidden"===t.type}(t)||function(t){return null===t.offsetParent||"hidden"===getComputedStyle(t).visibility}(t))}n.isTabbable=function(t){if(!t)throw new Error("No node provided");return!1!==a.call(t,i)&&s(t)},n.isFocusable=function(t){if(!t)throw new Error("No node provided");return!1!==a.call(t,r)&&o(t)};var r=e.concat("iframe").join(",");function h(t){var e=parseInt(t.getAttribute("tabindex"),10);return isNaN(e)?function(t){return"true"===t.contentEditable}(t)?0:t.tabIndex:e}function c(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex}function l(t){return"INPUT"===t.tagName}t.exports=n},529:t=>{t.exports=function(){for(var t={},i=0;i<arguments.length;i++){var a=arguments[i];for(var n in a)e.call(a,n)&&(t[n]=a[n])}return t};var e=Object.prototype.hasOwnProperty}},e={};function i(a){var n=e[a];if(void 0!==n)return n.exports;var s=e[a]={exports:{}};return t[a].call(s.exports,s,s.exports,i),s.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var a in e)i.o(e,a)&&!i.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t={upload:"Hochladen",cancel:"Abbrechen",close:"Schließen",uploading:"Hochladen ...",uploaded:"Hochgeladen",fetching:"Bild abrufen von $1$ ...",poweredBy:"Ermöglicht durch $1$",needHelp:"Benötigen Sie Hilfe?",units:{px:"px","%":"%",deg:"°"},errors:{response_not_ok:"Beim Abrufen dieser Datei ist ein Fehler aufgetreten",unable_to_search:"Bei der Suche ist ein Fehler aufgetreten",invalid_service_url:"Dies ist keine $1$ -URL",invalid_url:"Diese URL ist ungültig",upload_aborted:"Dein Upload wurde abgebrochen",upload_error:"Beim Hochladen dieser Datei ist ein Fehler aufgetreten",file_type_not_allowed:"Dieser Dateityp wird nicht unterstützt",file_too_large:"Die Datei muss kleiner als $1$ sein"},help:{loading:"Ladehilfe...",close:"Hilfe schließen"},services:{default:{heading:"Wählen Sie ein Bild aus"},local:{title:"Wählen Sie eine Datei",button:"Wählen Sie eine Datei aus",or:"oder",drop:"Ziehen Sie eine Datei hierher, um sie hochzuladen"},camera:{title:"Kamera",button:"Webcam Foto",switch:"Kamera wechseln",waiting:"Warten auf Kameraerlaubnis ...",unableToRead:"Wir können das Video nicht von Ihrer Kamera lesen. Dies kann daran liegen, dass Sie nicht die erforderliche Berechtigung erteilt haben oder dass Ihr Gerät den Kamerazugriff nicht unterstützt."},microlink:{button:"Import von $1$",label:"$1$ $2$ URL",placeholder:"Geben Sie eine URL von 1 bis 2 US-Dollar ein",type:"Post"},url:{title:"Direkte URL",label:"Bild-URL",placeholder:"Geben Sie eine Bild-URL ein"},instagram:{title:"Instagram"},facebook:{title:"Facebook"},flickr:{title:"Flickr",type:"ein foto"},ninegag:{title:"9GAG",type:"ein foto"},deviantart:{title:"DeviantArt"},artstation:{title:"ArtStation"},twitter:{title:"Twitter",type:"Foto-Tweet"},pinterest:{title:"Pinterest",type:"Stift"},flipboard:{title:"Flipboard",type:"artikel"},fotki:{title:"Fotos",type:"ein foto"},linkedin:{title:"LinkedIn"},reddit:{title:"Reddit"},tumblr:{title:"Tumblr"},weheartit:{title:"Wir lieben es"},screenshot:{title:"Bildschirmfoto",button:"Screenshot machen",label:"URL der Webseite",placeholder:"Geben Sie eine URL ein",loading:"Machen Sie einen Screenshot ..."},search:{button:"Suchen Sie nach $1$",label:"Suchen Sie nach einem Bild",placeholder:"Suche nach etwas",imagesPoweredBy:"Bilder möglich gemacht von $1$"},giphy:{title:"GIPHY"},unsplash:{title:"Aufspritzen"},pixabay:{title:"Pixabay"},pexels:{title:"Pexels"}},effects:{preview:{title:"Beispiel"},filters:{title:"Filter"},crop:{title:"Zuschneiden",aspectRatios:{free:"Frei",square:"Quadratisch"}},rotate:{title:"Drehen"},flip:{title:"Spiegeln",buttons:{horizontal:"Horizontal",vertical:"Vertikal"}},sharpen:{title:"Schärfen"},blur:{title:"Unschärfe"},brightness:{title:"Helligkeit"},contrast:{title:"Kontrast"},grayscale:{title:"Graustufen"},"hue-rotate":{title:"Farbton drehen"},invert:{title:"Invertieren"},saturate:{title:"Sättigen"},sepia:{title:"Sepia"}}};class e{constructor(){this.type="service",this.name="",this.invisible=!1,this.noRecolor=!1,this.icon="",this.color="#333",this.template=()=>"",this.handlers=()=>{},this.stop=()=>{},this.supports=()=>!0}}let a={};const n=t=>{const e={};for(const i in t)if(t.hasOwnProperty(i))if("object"==typeof t[i]){const a=n(t[i]);for(const t in a)a.hasOwnProperty(t)&&(e[i+"."+t]=a[t])}else e[i]=t[i];return e},s=(t,e)=>{try{let i=a[t];return"string"==typeof e&&(e=[e]),e&&e.forEach(((t,e)=>{i=i.replace(`$${e+1}$`,t)})),a.helper&&"function"==typeof a.helper&&(i=a.helper(i)),i}catch(t){return""}},o=t=>{if(!t)return[];const e=[];return"string"==typeof t?e.push(...Array.prototype.slice.call(document.querySelectorAll(t))):Array.isArray(t)?t.forEach((t=>{"string"==typeof t?e.push(...Array.prototype.slice.call(document.querySelectorAll(t))):e.push(t)})):e.push(t),e},r=[],h=(t,e,i)=>{r.find((i=>i.element===t&&i.type===e))||(t.addEventListener(e,i),r.push({element:t,type:e}))},c=t=>{if(window.requestAnimationFrame)return window.requestAnimationFrame(t);setTimeout((()=>{t(0)}),100)},l=(t,e)=>new Promise((i=>{c((()=>{const a=e.parentElement,n=e.getBoundingClientRect();if(!a)return;const s=a.getBoundingClientRect();n.height<n.width?(e.style.height=`${s.height}px`,e.style.width="auto"):(e.style.width=`${s.width}px`,e.style.height="auto"),c((()=>{const a=e.getBoundingClientRect();a.height>s.height?(e.style.height=`${s.height}px`,e.style.width="auto"):a.width>s.width&&(e.style.width=`${s.width}px`,e.style.height="auto"),c((()=>{const e=t.uppload.container.querySelector(".uppload-effect");e&&(e.style.opacity="1"),i()}))}))}))})),d=(t,e,i)=>new Promise(((a,n)=>{const s=t.getContext("2d");let o=!1;if(s)try{const e=s.getImageData(0,0,t.width,t.height).data;for(let t=0;t<e.length;t+=4)e[t+3]<255&&(o=!0)}catch(t){}if(o&&"image/webp"!==e&&(e=void 0,i=void 0),"function"==typeof t.toBlob)t.toBlob((t=>{t&&a(t),n(new Error("errors.image_error"))}),e,i);else if("function"==typeof t.toDataURL){const n=t.toDataURL(e,i);a((t=>{const e=atob(t.split(",")[1]),i=t.split(",")[0].split(":")[1].split(";")[0],a=new ArrayBuffer(e.length),n=new Uint8Array(a);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return new Blob([a],{type:i})})(n))}else n(new Error("errors.image_error"))})),p=(t,e)=>e.noRecolor?t:t.replace(/#000/g,e.color||"#000");var u=i(172),f=i.n(u);const m=(t,e,i,a)=>({name:e,blob:t,lastModified:a,type:i}),g=t=>{const e=t.blob;return t.lastModified=t.lastModified||new Date,((t,e,i)=>{try{return new File([t],e||"file_name",{lastModified:(i||new Date).getTime(),type:t.type})}catch(e){return t}})(e,t.name,t.lastModified)};class v extends e{constructor(){super(...arguments),this.name="default",this.invisible=!0,this.template=()=>`<p>${s("services.default.heading")}</p>`}}class b extends e{constructor(){super(...arguments),this.name="uploading",this.invisible=!0,this.template=()=>`<div class="uppload-loader">\n  <div></div>\n    <p class="uppload-loader-text">${s("uploading")}<span class="progress"></span></p>\n  </div>`}}class y{constructor(t){var e;this.services=[new v,new b],this.effects=[],this.isOpen=!1,this.activeService="default",this.activeEffect="",this.file={blob:new Blob},this.lang={},this.emitter=(e=e||Object.create(null),{on:function(t,i){(e[t]||(e[t]=[])).push(i)},off:function(t,i){e[t]&&e[t].splice(e[t].indexOf(i)>>>0,1)},emit:function(t,i){(e[t]||[]).slice().map((function(t){t(i)})),(e["*"]||[]).slice().map((function(e){e(t,i)}))}}),this.uploadProgress=0,this.inline=!1,this.transitionDuration=300,this.settings={},this.updateSettings(t||{});const i=document.createElement("div");this.renderContainer(),i.classList.add("uppload-container");const a=document.body;a&&a.appendChild(i),this.container=i,this.focusTrap=f()(this.container,{initialFocus:()=>this.container.querySelector("button")}),requestAnimationFrame((()=>this.update())),this.emitter.on("processing",(()=>{const t=this.container.querySelector(".processing-loader");t&&t.classList.add("visible")})),this.emitter.on("process",(()=>{const t=this.container.querySelector(".processing-loader");t&&t.classList.remove("visible")}))}updateSettings(t){var e;this.settings=Object.assign(Object.assign({},this.settings),t),this.emitter.emit("settingsUpdated",t),t.lang&&(e=t.lang,a=n(e)),t.defaultService&&(this.activeService=t.defaultService),t.lang&&(this.lang=t.lang),t.transitionDuration&&(this.transitionDuration=t.transitionDuration),t.uploader&&(this.uploader=t.uploader),this.inline=!!t.inline,this.update()}ready(){this.settings.value&&this.bind(this.settings.value),this.renderContainer(),this.emitter.emit("ready")}bind(t){this.settings.bind&&(o(this.settings.bind).forEach((e=>{"IMG"===e.nodeName?e.setAttribute("src",t):e.setAttribute("value",t)})),this.emitter.emit("bind"))}use(t){Array.isArray(t)?t.forEach((t=>this.install(t))):this.install(t)}remove(t){this.services=this.services.filter((e=>e.name!==t)),this.effects=this.effects.filter((e=>e.name!==t)),this.update(),this.emitter.emit("remove",t)}updatePlugins(t){const e=t(this.services),i=e.filter((t=>"service"===t.type)),a=!!i.filter((t=>"default"===t.name)).length;!!i.filter((t=>"uploading"===t.name)).length||i.unshift(new b),a||i.unshift(new v),this.services=i,this.effects=e.filter((t=>"effect"===t.type)),this.update()}install(t){t.supports()&&("service"===t.type?(!!this.services.filter((e=>e.name===t.name)).length||this.services.push(t),this.ready()):"effect"===t.type&&(!!this.effects.filter((e=>e.name===t.name)).length||this.effects.push(t),this.ready()))}modalOpen(){return this.isOpen}open(){if(this.isOpen)return;this.isOpen=!0,this.file={blob:new Blob},this.activeService="default",this.activeEffect="";const t=this.container.querySelector(`input[type=radio][value='${this.activeService}']`);t&&t.setAttribute("checked","checked"),this.container.style.transition=`${this.transitionDuration}ms`,this.container.style.opacity="0",this.update();let e=this.settings.defaultService;3===this.services.length&&this.navigate(this.services[2].name),e&&this.navigate(e),h(document.body,"keyup",(t=>{"Escape"===t.key&&this.open&&this.close()})),setTimeout((()=>{this.container.style.opacity="1"}),1),this.emitter.emit("open")}close(){this.isOpen&&(this.stopCurrentService(),this.isOpen=!1,this.emitter.emit("close"),this.container.style.opacity="0",setTimeout((()=>this.update()),this.transitionDuration))}toggle(){this.modalOpen()?this.close():this.open()}update(){if(!this.container)return;this.hideHelp(),this.settings.customClass&&this.container.classList.add(this.settings.customClass),this.inline&&this.container.classList.add("uppload-inline");const t=this.container.querySelector(".uppload-active-container");t&&(t.innerHTML=this.render());const e=this.container.querySelector("aside");e&&"default"!==this.activeService&&!this.activeEffect&&(e.style.display="block");const i=this.container.querySelector(".effects-nav");e&&i&&this.activeEffect?(i.style.display="",e.style.display="none"):e&&i&&"default"===this.activeService?(e.style.display="none",i.style.display="none"):e&&i&&(e.style.display="",i.style.display="none");const a=this.container.querySelector(".uppload-effect");a&&(a.style.display=this.activeEffect?"":"none"),window.requestAnimationFrame((()=>this.handlers())),this.isOpen?(this.container.classList.add("visible"),this.focusTrap.activate()):(this.container.classList.remove("visible"),this.focusTrap.deactivate());const n=this.container.querySelector("footer.effects-nav .effects-tabs");if(n){const t=n.parentElement;if(t){let e=0;t.querySelectorAll(".effects-continue").forEach((t=>{const i=t.getBoundingClientRect();e+=i.width}));const i=t.getBoundingClientRect();n.style.width=i.width-e+"px"}}const s=this.container.querySelector("aside");s&&3===this.services.length&&s.classList.add("uppload-services--single");const o=this.container.querySelector(".uppload-help");o&&(o.classList.remove("visible"),h(o,"click",(()=>this.hideHelp())))}getNavbar(t=!1){return`<${t?"nav":"div"} class="uppload-services">\n      ${this.services.filter((t=>!t.invisible)).map((e=>`<div data-uppload-service="${e.name}" class="uppload-service-name">\n          ${t?`<input type="radio" id="uppload-service-radio-${e.name}" value="${e.name}" name="uppload-radio">`:""}\n          <${t?`label for="uppload-service-radio-${e.name}"`:"button"} data-uppload-service="${e.name}">\n            ${0===e.icon.indexOf("http")?`<img class="service-icon" alt="" src="${e.icon}">`:p(e.icon,e)}\n            <span>${this.lang.services&&this.lang.services[e.name]&&this.lang.services[e.name].title?this.lang.services[e.name].title:e.name}</span>\n          </${t?"label":"button"}>\n        </div>`)).join("")}\n    </${t?"nav":"div"}>`}getEffectsNavbar(){return`<div class="effects-continue">\n    <button class="effects-continue--cancel">${s("cancel")}</button>\n  </div><div class="effects-tabs"><div class="effects-tabs-flow">\n      ${this.effects.map((t=>`\n      <input type="radio" id="uppload-effect-radio-${t.name}" value="${t.name}" name="uppload-effect-radio">\n        <label for="uppload-effect-radio-${t.name}">\n          ${0===t.icon.indexOf("http")?`<img class="effect-icon" alt="" src="${t.icon}">`:p(t.icon,t)}\n          <span>${this.lang.effects&&this.lang.effects[t.name]&&this.lang.effects[t.name].title?this.lang.effects[t.name].title:t.name}</span>\n        </label>\n      `)).join("")}\n      </div></div><div class="effects-continue">\n        <button class="effects-continue--upload">${s("upload")}</button>\n      </div>`}renderContainer(){this.container&&(this.container.innerHTML=`\n      <div class="uppload-modal">\n        <div class="processing-loader"></div>\n        <aside style="display: none">\n          ${this.getNavbar(!0)}\n        </aside>\n        <section>\n          ${this.error?`<div class="uppload-error">${this.error}</div>`:""}\n          <div class="uppload-active-container"></div>\n          <footer style="display: none" class="effects-nav">${this.getEffectsNavbar()}</footer>\n        </section>\n        <div class="uppload-help-loading">\n          <div class="uppload-loader">\n            <div></div>\n            <p class="uppload-loader-text">${s("help.loading")}</p>\n          </div>\n        </div>\n        <div class="uppload-help">\n          <div><button><span>${s("help.close")}</span><span aria-hidden="true">&times;</span></button></div>\n          <iframe></iframe>\n        </div>\n      </div>\n      <div class="uppload-modal-bg">\n        <button class="uppload-close" aria-label="${s("close")}">&times;</button>\n      </div>\n    `)}render(){return`\n      ${this.error?`<div class="uppload-error">${this.error}</div>`:""}\n      ${this.activeEffect?`<div class="uppload-effect uppload-effect--${this.activeEffect||"none"}">\n      ${this.activeEffect&&this.file?this.renderActiveEffect(this.file):""}\n    </div>`:`<div class="uppload-service uppload-service--${this.activeService}">\n      ${this.activeEffect&&this.file?"":this.renderActiveService()}\n      ${"default"===this.activeService?this.getNavbar():""}\n    </div>`}`}renderActiveService(){const t=this.services.filter((t=>t.name===this.activeService));if(t.length){const e=t[0];return requestAnimationFrame((()=>{"function"==typeof e.handlers&&e.handlers({next:this.next.bind(this),upload:this.upload.bind(this),uploadMultiple:this.uploadMultiple.bind(this),handle:this.handle.bind(this),showHelp:this.showHelp.bind(this),uppload:this,translate:s})})),`${"function"==typeof e.template?e.template({translate:s,uppload:this}):""}`}}renderActiveEffect(t){const e=this.effects.filter((t=>t.name===this.activeEffect));if(e.length){const i=e[0];return requestAnimationFrame((()=>{"function"==typeof i.handlers&&i.handlers({next:this.next.bind(this),upload:this.upload.bind(this),uploadMultiple:this.uploadMultiple.bind(this),handle:this.handle.bind(this),showHelp:this.showHelp.bind(this),uppload:this,translate:s})})),`\n        <div class="active-effect-container">${"function"==typeof i.template?i.template({file:t,translate:s}):""}</div>\n      `}}uploadMultiple(t){return this.emitter.emit("before-upload"),new Promise((e=>{this.navigate("uploading"),this.uploader&&"function"==typeof this.uploader?this.uploader(t,this.updateProgress.bind(this)).then((t=>{this.navigate("default"),e(t),this.emitter.emit("upload",t),this.close()})).catch((t=>this.handle(t))):this.handle(new Error("no-uploader"))}))}hideHelp(){const t=this.container.querySelector(".uppload-help"),e=this.container.querySelector(".uppload-help-loading"),i=this.container.querySelector("aside"),a=this.container.querySelector("section");e&&e.classList.remove("visible"),t&&t.classList.remove("visible"),i&&(i.style.display=""),a&&(a.style.display=""),this.emitter.emit("hide-help")}showHelp(t){this.emitter.emit("help",t);const e=this.container.querySelector("aside");e&&(e.style.display="none");const i=this.container.querySelector("section");i&&(i.style.display="none");const a=this.container.querySelector(".uppload-help-loading");a&&a.classList.add("visible");const n=this.container.querySelector(".uppload-help");if(n){const e=n.querySelector("iframe");if(e){e.setAttribute("src",`https://uppload.js.org/help${t}`);let i=!1;h(e,"load",(()=>{i=!0,n.classList.add("visible"),a&&a.classList.remove("visible")})),h(e,"error",(()=>{i=!0,this.hideHelp()}))}}}next(t){if(this.emitter.emit("next",t),this.file=t,this.activeEffect);else{if(!this.effects.length||!t.type||0!==t.type.indexOf("image/"))return this.upload(g(t));this.activeEffect=this.effects[0].name,this.update()}const e=this.container.querySelector(`input[name='uppload-effect-radio'][value='${this.activeEffect}']`);e&&e.setAttribute("checked","checked")}compress(t){return this.settings.compressionFromMimes&&!this.settings.compressionFromMimes.includes(t.type)?new Promise((e=>e(t))):"function"==typeof this.settings.compressor?this.settings.compressor(t):((t,e)=>new Promise((i=>{const a=URL.createObjectURL(t),n=document.createElement("canvas"),s=document.createElement("img"),o=e.maxSize||[e.maxWidth||1/0,e.maxHeight||1/0];s.src=a,s.onload=()=>{const a=e.compressionToMime||"image/jpeg",r=e.compression||1,h=s.width/s.height;s.width>o[0]&&(s.width=o[0],s.height=s.width*(1/h)),s.height>o[1]&&(s.height=o[1],s.width=s.height*h),n.width=s.width,n.height=s.height;const c=n.getContext("2d");if(!c)return i(t);c.clearRect(0,0,n.width,n.height),c.drawImage(s,0,0,n.width,n.height),d(n,a,r).then((e=>{if(e)return i(e);i(t)}))},h(s,"error",(()=>i(t)))})))(t,this.settings)}upload(t){return this.emitter.emit("before-upload",t),new Promise(((e,i)=>{this.navigate("uploading");let a=m(t);try{"string"==typeof t.name&&(a=m(t,t.name,t.type,new Date(t.lastModified)))}catch(t){}this.uploader&&"function"==typeof this.uploader?this.compress(t).then((t=>(this.settings.compression&&this.emitter.emit("compress",t),t))).then((t=>(a.blob=t,g(a)))).then((t=>this.uploader(t,this.updateProgress.bind(this)))).then((t=>{this.bind(t),this.navigate("default"),e(t),this.emitter.emit("upload",t),this.close()})).catch((t=>this.handle(t))):i("no-uploader")}))}handle(t){this.error=s(t.message)||t.message,this.emitter.emit("error",this.error),this.update(),"uploading"===this.activeService&&this.navigate("default"),setTimeout((()=>{this.error=void 0,this.update()}),4e3)}handlers(){const t=()=>this.open();this.container.querySelectorAll(".uppload-service--default .uppload-service-name button").forEach((t=>{h(t,"click",(e=>{const i=t.getAttribute("data-uppload-service");if(i){this.navigate(i);const t=this.container.querySelector(`[data-uppload-service="${i}"]`);if(t&&t.parentElement){let e=0,i=0;const a=t.getBoundingClientRect(),n=t.parentElement.getBoundingClientRect();e=a.top-n.top,i=a.left-n.left;const s=t.parentElement.parentElement;try{s&&s.scrollTo(i,e)}catch(t){}}}const a=this.container.querySelector(`input[type=radio][value='${i}']`);return a&&a.setAttribute("checked","checked"),e.preventDefault(),!1}))})),this.container.querySelectorAll(".uppload-services input[type='radio']").forEach((t=>{h(t,"change",(t=>{const e=this.container.querySelector("[name='uppload-radio']:checked");if(!e)return;const i=e.value;this.navigate(i)}))})),this.container.querySelectorAll(".effects-nav input[type='radio']").forEach((t=>{h(t,"change",(t=>{const e=this.container.querySelector("[name='uppload-effect-radio']:checked");if(!e)return;const i=e.value;this.activeEffect=i,this.update()}))}));const e=this.container.querySelector(".uppload-modal-bg");e&&h(e,"click",(()=>this.close())),this.settings.call&&o(this.settings.call).forEach((e=>{h(e,"click",t)}));const i=this.container.querySelector(".effects-continue--cancel");i&&h(i,"click",(()=>{this.file={blob:new Blob},this.activeService="default",this.activeEffect="",this.update()}));const a=this.container.querySelector(".effects-continue--upload");a&&h(a,"click",(()=>{this.file&&(this.activeService="",this.activeEffect="",this.upload(g(this.file)))}))}stopCurrentService(){const t=this.services.filter((t=>t.name===this.activeService));t.length&&t[0].stop()}navigate(t){if(!this.services.filter((e=>e.name===t)).length)throw new Error("invalid-service");this.stopCurrentService(),this.activeService=t,this.update();const e=this.container.querySelector(".uppload-active-container input, .uppload-active-container button");e&&e.focus()}on(t,e){return this.emitter.on(t,e)}off(t,e){return this.emitter.on(t,e)}updateProgress(t){this.uploadProgress=t;const e=this.container.querySelector(".uppload-loader-text .progress");e&&(e.innerHTML=`${parseInt(t.toString())}%`),this.emitter.emit("progress",this.updateProgress)}}const w=({endpoint:t,fileKeyName:e="file",method:i="POST",responseKey:a="url",responseFunction:n,settingsFunction:s})=>(o,r)=>new Promise(((h,c)=>{const l=new FormData;l.append(e,o);const d=new XMLHttpRequest;d.open(i,t,!0),"function"==typeof s&&s(d),d.addEventListener("progress",(t=>{"function"==typeof r&&r(t.loaded/t.total)})),d.addEventListener("load",(()=>{const t=d.responseText;if("function"==typeof n)return h(n(t));const e=JSON.parse(t);return h(e[a])})),d.addEventListener("error",(()=>c("errors.response_not_ok"))),d.addEventListener("abort",(()=>c("errors.upload_aborted"))),d.send(l)}));class x extends e{constructor({mimeTypes:t,maxFileSize:e}={}){super(),this.name="local",this.icon='<svg aria-hidden="true" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg"><g fill="#000" fill-rule="nonzero"><path d="M177 56L125 4l-3-2v57h57c0-2-1-3-2-3z"/><path d="M173 113h8V75h-66c-5 0-8-4-8-8V1H27c-4 0-8 4-8 8v184c0 4 4 8 8 8h65v-8c0-45 36-80 81-80z"/><path d="M173 128c-36 0-65 29-65 64s29 64 65 64c35 0 64-29 64-64s-29-64-64-64zm27 63h-14v33c0 2-2 3-4 3h-20c-2 0-3-1-3-3v-33h-14c-3 0-5-3-3-5l28-30c1-2 3-2 5 0l27 30c2 2 1 5-2 5z"/></g></svg>',this.color="#34495e",this.mimeTypes=["image/gif","image/jpeg","image/jpg","image/png"],this.maxFileSize=1/0,this.template=t=>`<div class="drop-area">\n      <div>${t.translate("services.local.drop")}</div>\n      <em>${t.translate("services.local.or")}</em>\n      <button class="uppload-button uppload-button--cta" style="background: ${this.color}">${t.translate("services.local.button")}</button>\n    </div>\n      <div class="alternate-input">\n        <input type="file" accept="${this.mimeTypes.join()}"${t.uppload.settings.multiple?" multiple":""}></div><button class="need-help-link"><span>${s("needHelp")}</span aria-hidden="true"><span>?</span></button>`,this.handlers=t=>{const e=t.uppload.container.querySelector(".drop-area");e&&(h(e,"drop",(e=>this.dropHandler(t,e))),h(e,"dragover",(e=>this.dragHandler(t,e))),h(e,"dragend",(e=>this.dragStop(t,e))),h(e,"dragexit",(e=>this.dragStop(t,e))),h(e,"dragleave",(e=>this.dragStop(t,e))),h(e,"click",(e=>this.fileSelect(t,e))));const i=t.uppload.container.querySelector(".alternate-input input[type=file]");i&&h(i,"change",(e=>this.getFile(t,e)));const a=t.uppload.container.querySelector(".need-help-link");a&&h(a,"click",(()=>t.showHelp("/services/local")))},t&&(this.mimeTypes=t),e&&(this.maxFileSize=e)}getFile(t,e){e.preventDefault();const i=e.target.files;let a=null;if(i){if(t.uppload.settings.multiple&&i.length>1)return t.uploadMultiple(Array.from(i));for(let e=0;e<i.length;e++){const n=i[e];-1!==this.mimeTypes.indexOf(n.type)&&(n.size<this.maxFileSize?a=n:t.handle(new Error(t.translate("errors.file_too_large",`${this.maxFileSize} bytes`))))}}a&&a&&t.next({blob:a,size:a.size,type:a.type,lastModified:a.lastModified?new Date(a.lastModified):void 0,name:a.name})}fileSelect(t,e){const i=t.uppload.container.querySelector(".alternate-input input[type=file]");i&&i.click()}dragStop(t,e){const i=t.uppload.container.querySelector(".drop-area");i&&i.classList.remove("drop-area-active")}dragHandler(t,e){e.preventDefault();const i=t.uppload.container.querySelector(".drop-area");i&&i.classList.add("drop-area-active")}dropHandler(t,e){e.preventDefault(),this.dragStop(t,e);let i=null;if(e.dataTransfer&&e.dataTransfer.items)for(let a=0;a<e.dataTransfer.items.length;a++){const n=e.dataTransfer.items[a];"file"===n.kind&&-1!==this.mimeTypes.indexOf(n.type)&&(i=n.getAsFile(),(!i||i.size>this.maxFileSize)&&(i=null,t.handle(new Error(t.translate("errors.file_too_large",`${this.maxFileSize} bytes`)))))}i&&i&&t.next({blob:i,size:i.size,type:i.type,lastModified:i.lastModified?new Date(i.lastModified):void 0,name:i.name})}}class M{constructor(){this.type="effect",this.name="",this.invisible=!1,this.noRecolor=!1,this.color="#000",this.icon="",this.template=()=>"",this.handlers=()=>{},this.supports=()=>!0}}var S=i(129),D=i.n(S);class C extends M{constructor({aspectRatio:t,aspectRatioOptions:e,hideAspectRatioSettings:i,autoCropArea:a,viewMode:n}={}){super(),this.name="crop",this.icon='<svg aria-hidden="true" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg"><path d="M74 0v182h134v-25h-26V74H99V48h96c4 0 7 1 9 4 3 2 4 5 4 9v121h48v26h-48v48h-26v-48H61a13 13 0 01-13-13V74H0V48h48V0h26z" fill="#000" fill-rule="nonzero"/></svg>',this.aspectRatio=NaN,this.hideAspectRatioSettings=!1,this.aspectRatioOptions={free:NaN,square:1,"16:9":16/9},this.autoCropArea=1,this.viewMode=1,this.originalFile={blob:new Blob},this.template=({file:t,translate:e})=>{const i=URL.createObjectURL(t.blob);return this.originalFile=t,`\n      <div class="uppload-cropping-element">\n        <img style="width: 20px" alt="" src="${i}">\n      </div>\n      ${this.aspectRatio||this.hideAspectRatioSettings?"":`<div class="uppload-actions">\n        ${Object.keys(this.aspectRatioOptions).map(((t,i)=>`\n          <input value="${this.aspectRatioOptions[t]}" data-name="${t}" name="crop-aspect-ratio" type="radio"${i?"":" checked"} id="crop-aspect-ratio-${t}">\n          <label for="crop-aspect-ratio-${t}">${e(`effects.crop.aspectRatios.${t}`)||t}</label>`)).join("")}\n      </div>`}\n    `},this.handlers=t=>{const e=t.uppload.container.querySelector(".uppload-cropping-element img"),i=this.originalFile;e&&l(t,e).then((()=>{const a=new(D())(e,{aspectRatio:this.aspectRatio,autoCropArea:this.autoCropArea,viewMode:this.viewMode,ready(){d(a.getCroppedCanvas()).then((e=>{i.blob=e,t.next(i)}))},cropend(){d(a.getCroppedCanvas()).then((e=>{i.blob=e,t.next(i)}))}});t.uppload.container.querySelectorAll("input[name='crop-aspect-ratio']").forEach((e=>{h(e,"change",(()=>{const e=t.uppload.container.querySelector("input[name='crop-aspect-ratio']:checked");e&&(a.setAspectRatio(this.aspectRatioOptions[e.getAttribute("data-name")||"free"]),d(a.getCroppedCanvas()).then((e=>{i.blob=e,t.next(i)})))}))}))}))},t&&(this.aspectRatio=t),e&&(this.aspectRatioOptions=e),a&&(this.autoCropArea=a),n&&(this.viewMode=n),i&&(this.hideAspectRatioSettings=i)}}class E extends M{constructor(){super(...arguments),this.name="rotate",this.icon='<svg aria-hidden="true" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg"><path d="M139 37a110 110 0 014 218v-37a73 73 0 00-4-144v36L66 55l73-55v37zM61 234c15 11 33 18 52 21v-37c-9-2-18-6-25-11l-27 27zm-20-21c-12-15-19-33-22-52h37c2 9 6 18 11 26l-26 26zM40 81c-11 14-19 32-21 51h37c2-11 7-21 13-29L40 81z" fill="#000" fill-rule="nonzero"/></svg>',this.value=0,this.max=360,this.unit="deg",this.originalFile={blob:new Blob},this.template=({file:t,translate:e})=>{const i=URL.createObjectURL(t.blob);return this.originalFile=t,`\n      <div class="uppload-rotating-element">\n        <img style="width: 20px" alt="" src="${i}">\n      </div>\n      <div class="settings">\n        <input type="range" value="${this.value}" min="0" max="${this.max}">\n        <span class="value"><span>0</span>${e(`units.${this.unit}`)||this.unit}</span>\n      </div>\n    `},this.handlers=t=>{const e=t.uppload.container.querySelector(".uppload-rotating-element img"),i=this.originalFile;e&&l(t,e).then((()=>{const a=new(D())(e,{autoCropArea:1,viewMode:1,dragMode:"none",cropBoxMovable:!1,cropBoxResizable:!1,toggleDragModeOnDblclick:!1,ready(){t.uppload.emitter.emit("processing"),d(a.getCroppedCanvas()).then((e=>{i.blob=e,t.uppload.emitter.emit("process"),t.next(i)}))}}),n=t.uppload.container.querySelector(".settings input[type='range']");n&&h(n,"change",(()=>{let e=0;const n=t.uppload.container.querySelector(".settings input[type='range']");n&&(e=parseInt(n.value));const s=t.uppload.container.querySelector(".settings .value span");s&&(s.innerHTML=e.toString()),a.rotate(e-this.value),this.value=e,t.uppload.emitter.emit("processing"),d(a.getCroppedCanvas()).then((e=>{i.blob=e,t.uppload.emitter.emit("process"),t.next(i)}))}))}))}}}const k=document.getElementsByClassName("powermail_uppload");Array.prototype.forEach.call(k,(function(e){let i=e.dataset.pic,a=e.dataset.btn,n=e.dataset.input,s=e.dataset.maxwidth,o=e.dataset.maxheight,r=e.dataset.maxFileSize,h=new y({lang:t,uploader:w({endpoint:"/?uppload=1",fileKeyName:"file"}),bind:[document.querySelector(i),document.querySelector(n)],call:[document.querySelector(a),document.querySelector(i)],maxWidth:s,maxHeight:o});h.use([new x({maxFileSize:r,mimeTypes:["image/png","image/jpeg"]})]),h.use([new C,new E])}))})()})();